#apiVersion: argoproj.io/v1alpha1
#kind: Application
#metadata:
#  name: grafana
#  namespace: argocd
#  project: monitoring
#  annotations:
#    argocd.argoproj.io/sync-wave: "1"
#spec:
#  project: default
#  source:
#    repoURL: https://grafana.github.io/helm-charts
#    chart: grafana
#    targetRevision: 7.3.*           # or a fixed version you prefer
#    helm:
#      values: |
#        adminPassword: admin
#        service:
#          type: ClusterIP
#        ingress:
#          enabled: true
#          ingressClassName: traefik
#          annotations:
#            traefik.ingress.kubernetes.io/router.entrypoints: web
#          hosts:
#            - grafanadash.k8s
#          path: /
#          pathType: Prefix
#        datasources:
#          datasources.yaml:
#            apiVersion: 1
#            datasources:
#            - name: Prometheus
#              type: prometheus
#              url: http://prometheus-operated.monitoring.svc.cluster.local:9090
#              access: proxy
#              isDefault: true
#  destination:
#    server: https://kubernetes.default.svc
#    namespace: monitoring
#  syncPolicy:
#    automated: { prune: true, selfHeal: true }
#    syncOptions: [ "CreateNamespace=true" ]